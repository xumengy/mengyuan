<!DOCTYPE html>
<html>

	<head>
		<link rel="stylesheet" href="layui/css/layui.css" media="all"/>
		<meta charset="UTF-8">
		<title>linkSelect级联选择测试</title>
	</head>
		<style type="text/css">
		body{
			background-color:#F1F1F1;
		}
		</style>
	<body>
		<div class="fb-messenger-checkbox"  
		  origin="https://oncegimo.com"
		  page_id=218232775411154
		  messenger_app_id=645170542536576
		  user_ref="<UNIQUE_REF_PARAM>"
		  prechecked="<true | false>"
		  allow_login="<true>"
		  size="<small | medium | large | standard | xlarge>"
		  skin="<light|dark>"
		  center_align="<true|false>">
		</div>
		
		<div class="admin-main" style="width:70%;height:100%;margin:10px auto;background-color:#ffffff">
			<!-- 头部导航 -->
			<blockquote class="layui-elem-quote" style="background-color:#393D49">
				<span style="font-size:30px;color:#ffffff">级联选择器测试</span>
			</blockquote>
			<fieldset class="layui-elem-field  layui-field-title">
			  <div class="layui-field-box" style="float:left;width:67%">
					<form class="layui-form layui-form-pane" id="add_form">
						<!-- 测试 -->
						<div id="selectId" class="layui-form-item"></div>
		      			<a class="layui-btn layui-btn-sm" onclick="getlinkValue(0)">获取值</a>
		      			<a class="layui-btn layui-btn-sm" onclick="setlinkReload(0)">重载</a>
		      			<div id="getvalue"></div>
						<!-- 测试 -->
						<br>
						<!-- 测试 -->
						<div id="selectId2" class="layui-form-item"></div>
		      			<a class="layui-btn layui-btn-sm" onclick="getlinkValue(1)">获取值</a>
		      			<a class="layui-btn layui-btn-sm" onclick="setlinkReload(1)">重载</a>
		      			<div id="getvalue2"></div>
						<!-- 测试 -->
					
					</form>
			  </div>
			</fieldset>		
		</div>
		
        <script type="text/javascript" src="layui/layui.all.js" ></script>
        <script src="js/jquery-2.2.3.min.js"></script>
		<script>
		layui.config({
			base: ''
		});

		var $,linkSelect;
			var citys = [
				{
					ids:1,
					names:"选项1",
					childrens:[
						{
							ids:11,
							names:"选项1.1"
						},
						{
							ids:12,
							names:"选项1.2",
							childrens:[
								{
									ids:121,
									names:"选项1.2.1"
								},
								{
									ids:122,
									names:"选项1.2.2"
								},
								{
									ids:123,
									names:"选项1.2.3"
								},
							]
						},
					]
				},
				{
					ids:2,
					names:"选项2",
					childrens:[]
				},
				{
					ids:3,
					names:"选项3",
					childrens:[
						{
							ids:31,
							names:"选项3.1",
							childrens:[
									{
										ids:311,
										names:"选项3.1.1",
										childrens:[
												{ids:3111,names:"选项3.1.1.1"},
												{ids:3112,names:"选项3.1.1.2"},
												{ids:3113,names:"选项3.1.1.3"},
										]
									},
									{
										ids:312,
										names:"选项3.1.2",
									},
									{
										ids:313,
										names:"选项3.1.3",
									},
									{
										ids:314,
										names:"选项3.1.4",
									},
								]
						},
						{
							ids:32,
							names:"选项3.2",
							childrens:[
									{
										ids:321,
										names:"选项3.2.1",
									},
									{
										ids:322,
										names:"选项3.2.2",
									},
									{
										ids:323,
										names:"选项3.2.3",
										childrens:[
												{ids:3231,names:"选项3.2.3.1"},
												{ids:3232,names:"选项3.2.3.2"},
												{ids:3233,names:"选项3.2.3.3"},
										]
									},
									{
										ids:324,
										names:"选项3.2.4",
									},
								]
						},
						{
							ids:33,
							names:"选项3.3",
						},
						{
							ids:34,
							names:"选项3.4",
						},
					]
				},
				{
					ids:4,
					names:"选项4",
				},
				{
					ids:5,
					names:"选项5",
				},
				{
					ids:6,
					names:"选项6",
				},
				{
					ids:7,
					names:"选项7",
				},
				{
					ids:8,
					names:"选项8",
				},
				{
					ids:9,
					names:"选项9",
				},
				{
					ids:10,
					names:"选项10",
				},
			];
			var link;
		

		var $,$form;
		layui.use(['form','linkSelect'], function() {
			$ = layui.jquery;
			$form = layui.form;
			linkSelect = layui.linkSelect;
			
			//本地数据渲染
			link = linkSelect.render({
					id:'addRegion',
				 	elem: '#selectId',
		            data:citys,
		            lableName:'本地渲染：',			//自定义表单名称    默认：'级联选择'
		            placeholderText:'请选择...',		//自定义holder名称    默认：'请选择'
		            replaceId:"ids",				//替换字段id   默认id
		            replaceName:"names",			//替换字段名称  默认name
		            replaceChildren:"childrens",	//替换字段名称  默认 children
		            disabled:false,					//初始禁用         默认false
		            selectedArr:[3,32,323,3232],	//默认选中数组
		    	    selected:function(item,dom){
		    	    	//选中回调函数
		    	    	// console.log(item);
		    	    	// console.log(dom);
		    	    }
			});
				
			//url渲染
			link2 = linkSelect.render({
					id:'addRegion2',
				 	elem: '#selectId2',
				 	url:"queryRegionList.json",
		            method:'post',
		            lableName:'接口渲染：',			//自定义表单名称    默认：'级联选择'
		            placeholderText:'请选择...',		//自定义holder名称    默认：'请选择'
		            replaceId:"ids",			//替换字段id 默认id
		            replaceName:"names",		//替换字段名称 moren
		            replaceChildren:"childrens",	//替换字段名称  默认 children
		            disabled:false,					//初始禁用 默认false
		            selectedArr:[1,12,121],	//默认选中数组
		            where:{},						//url接口自定义参数
		            response: {				//url返回参数定义
		    	    	statusName: 'resultCode',
		    	    	statusCode: 0,
		    	    	dataName: 'result'
		    	    },
		    	    selected:function(item,dom){
		    	    	//选中回调函数
		    	    	// console.log(item);
		    	    	// console.log(dom);
		    	    },
		    	    done:function(res){
		    	    	//url渲染成功回调
		    	    	// console.log(res);
		    	    },
		    	    error:function(res){
		    	    	//url加载失败回调
		    	    	// console.log(res);
		    	    }
				});
		});
		
		  //获取值
		  function getlinkValue(index){
		  	if(index==0){
			  	//$("#getvalue").text(JSON.stringify(linkSelect.getValue("addRegion")));
			  	$("#getvalue").text(JSON.stringify(link.getValue()));
		  	}else{
			  	//$("#getvalue").text(JSON.stringify(linkSelect.getValue("addRegion")));
			  	$("#getvalue2").text(JSON.stringify(link2.getValue()));
		  	}
		  }
		  
		  //重载
		  function setlinkReload(index){
		  	if(index==0){
			  	linkSelect.reload("addRegion",{selectedArr:[1,11]});
			  	//link.reload({selectedArr:[1,11]});
		  	}else{
			  	linkSelect.reload("addRegion2",{selectedArr:[510000,510100,510104]});
			  	//link2.reload({selectedArr:[1,11]});
		  	}
		  }
		</script>
		<script>
		  window.fbAsyncInit = function() {
		    FB.init({
		      appId            : 'your-app-id',
		      autoLogAppEvents : true,
		      xfbml            : true,
		      version          : 'v3.1'
		    });
		  };

		  (function(d, s, id){
		     var js, fjs = d.getElementsByTagName(s)[0];
		     if (d.getElementById(id)) {return;}
		     js = d.createElement(s); js.id = id;
		     js.src = "https://connect.facebook.net/en_US/sdk.js";
		     fjs.parentNode.insertBefore(js, fjs);
		   }(document, 'script', 'facebook-jssdk'));
		</script>
	</body>

</html>