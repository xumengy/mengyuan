webpackJsonp([15,30],{"0Mel":function(t,e,n){var a=n("LzYB");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("3d5e01e3",a,!0)},"7k02":function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.avatar-uploader .el-upload {\n\t  border: 1px dashed #d9d9d9;\n\t  border-radius: 6px;\n\t  cursor: pointer;\n\t  position: relative;\n\t  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n\t  border-color: #20a0ff;\n}\n.avatar-uploader-icon {\n\t    font-size: 28px;\n\t    color: #8c939d;\n\t    width: 100%;\n\t    height: 100%;\n\t    line-height: 120px;\n\t    text-align: center;\n}\n.avatar {\n\t    width: 100%;\n\t    height: 100%;\n\t    display: block;\n}\n",""])},Aq4s:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("s8Ph"),i=n("UE6j"),l=n("tU9i"),r=n("H8JJ"),o=n("Pcuu"),s={name:"Category",components:{BaseTable:l.a,CategoryModal:i.default,ActionPermControl:o.a},mixins:[r.a],data:function(){return{dialogFormVisible:!1,dialogStatus:"",downloadLoading:!1}},methods:{getList:function(){var t=this;this.listLoading=!0,Object(a.d)(this.listQuery).then(function(e){t.list=e.data.data.items,t.total=e.data.data.total,t.listLoading=!1}).catch(function(){t.list=[],t.total=0,t.listLoading=!1})},filterLevel:function(t,e){return e.level===t},handleCreate:function(){var t=this;this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.categoryModal.init()})},handleUpdate:function(t){var e=this;this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.categoryModal.init(t)})},handleDelete:function(t){var e=this;this.$confirm("此操作将永久删除该类目, 是否继续?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.b)(t.id).then(function(t){e.getList(),e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},handleDownload:function(){var t=this;this.downloadLoading=!0,Promise.all([n.e(2),n.e(74)]).then(n.bind(null,"zWO4")).then(function(e){var n=e.formatJson(["id","name","level","pid","iconUrl","picUrl","desc"],t.list,"category");e.export_json_to_excel({header:["类目ID","名称","级别","父类目ID","类目图标","类目图片","简介"],data:n,filename:"商品类目信息"}),t.downloadLoading=!1})}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container calendar-list-container"},[n("div",{staticClass:"filter-container"},[n("el-form",{attrs:{inline:!0,"label-position":"right"}},[n("el-form-item",{attrs:{label:"类目ID："}},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入类目ID"},model:{value:t.listQuery.id,callback:function(e){t.$set(t.listQuery,"id",e)},expression:"listQuery.id"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"类目名称："}},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入类目名称"},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}})],1),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("查找")]),t._v(" "),t.$checkPerm("create")?n("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreate}},[t._v("添加")]):t._e()],1)],1),t._v(" "),n("base-table",{attrs:{data:t.list,loading:t.listLoading,pageSize:t.listQuery.limit,currentPage:t.listQuery.page,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[n("el-table-column",{attrs:{align:"center",label:"类目ID",prop:"id"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"类目名称",prop:"name"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"类型",prop:"type"},scopedSlots:t._u([{key:"default",fn:function(e){return n("span",{},[t._v("\n        "+t._s(1==e.row.type?"整车":"后市场")+"\n      ")])}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center","min-width":"100",label:"简介",prop:"desc"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"级别",prop:"level"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:"L1"===e.row.level?"primary":"info"}},[t._v(t._s("L1"===e.row.level?"一级类目":"二级类目"))])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"父类目ID",prop:"pid"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(0==e.row.pid?"--":e.row.pid)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作",width:"200","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("action-perm-control",{attrs:{hasPerm:t.$checkPerm("update","delete")}},[t.$checkPerm("update")?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){t.handleUpdate(e.row)}}},[t._v("编辑")]):t._e()],1)]}}])})],1),t._v(" "),t.dialogFormVisible?n("category-modal",{ref:"categoryModal",attrs:{dialogStatus:t.dialogStatus},on:{fetchList:t.getList}}):t._e()],1)},staticRenderFns:[]};var d=n("VU/8")(s,c,!1,function(t){n("G9eA")},null,null);e.default=d.exports},G9eA:function(t,e,n){var a=n("7k02");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("2dc0cb99",a,!0)},LzYB:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},UE6j:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("mvHQ"),i=n.n(a),l=n("s8Ph"),r={name:[{required:!0,message:"类目名不能为空",trigger:"blur"}],level:[{required:!0,message:"请选择类目级别",trigger:"blur"}],pid:[{required:!0,message:"父类目不能为空",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"blur"}]},o={name:"CategoryModal",props:{dialogStatus:String},data:function(){return{dialogFormVisible:!1,dataForm:{name:"",type:2,level:"L1",pid:0,iconUrl:"",picUrl:"",desc:""},textMap:{update:"编辑",create:"创建"},rules:r}},methods:{init:function(t){var e=this;this.resetForm(),this.dialogFormVisible=!0,this.$nextTick(function(){e.initFormData(t),e.$refs.dataForm.clearValidate()})},initFormData:function(t){if(t){var e=JSON.parse(i()(t));this.dataForm=e}},resetForm:function(){this.dataForm={name:"",type:2,level:"L1",pid:0,iconUrl:"",picUrl:"",desc:""}},uploadIconUrl:function(t){this.dataForm.iconUrl=t},uploadPicUrl:function(t){this.dataForm.picUrl=t},requestData:function(t,e){var n=this;this.$refs.dataForm.validate(function(a){a&&e(n.dataForm).then(function(){n.$notify({title:"成功",message:"create"===t?"创建成功":"更新成功",type:"success",duration:2e3})}).catch(function(e){n.$notify({title:"失败",message:e.data?e.data.msg:"create"===t?"创建失败":"更新失败",type:"error",duration:2e3})}).finally(function(){n.$emit("fetchList"),n.dialogFormVisible=!1})})},createData:function(){this.requestData("create",l.a)},updateData:function(){this.requestData("update",l.e)}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:t.rules,model:t.dataForm,"status-icon":"","label-position":"left","label-width":"100px"}},[n("el-form-item",{attrs:{label:"类目名称",prop:"name"}},[n("el-input",{model:{value:t.dataForm.name,callback:function(e){t.$set(t.dataForm,"name",e)},expression:"dataForm.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"级别",prop:"level"}},[n("el-select",{model:{value:t.dataForm.level,callback:function(e){t.$set(t.dataForm,"level",e)},expression:"dataForm.level"}},[n("el-option",{attrs:{label:"一级类目",value:"L1"}})],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"类目简介",prop:"desc"}},[n("el-input",{model:{value:t.dataForm.desc,callback:function(e){t.$set(t.dataForm,"desc",e)},expression:"dataForm.desc"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"类型",prop:"type"}},[n("el-radio-group",{model:{value:t.dataForm.type,callback:function(e){t.$set(t.dataForm,"type",e)},expression:"dataForm.type"}},[n("el-radio",{attrs:{label:1}},[t._v("整车")]),t._v(" "),n("el-radio",{attrs:{label:2}},[t._v("后市场")])],1)],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),"create"==t.dialogStatus?n("el-button",{attrs:{type:"primary"},on:{click:t.createData}},[t._v("确定")]):n("el-button",{attrs:{type:"primary"},on:{click:t.updateData}},[t._v("确定")])],1)],1)},staticRenderFns:[]};var c=n("VU/8")(o,s,!1,function(t){n("0Mel")},null,null);e.default=c.exports}});