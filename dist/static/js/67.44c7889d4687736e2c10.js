webpackJsonp([67],{"mPe+":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("zlpS"),l=i("TKbA"),n={name:"basicMotor",components:{basicMotorModal:a.default},data:function(){return{total:0,dateTime:"",downloadLoading:!1,listLoading:!1,list:[],listQuery:{page:1,limit:20,type:0,id:void 0,name:void 0,model:void 0,sort:"add_time",order:"desc"},dialogStatus:"create",motorDialogVisible:!1}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,Object(l.c)(this.listQuery).then(function(e){t.list=e.data.data.items,t.total=e.data.data.total,t.listLoading=!1}).catch(function(){t.list=[],t.total=0,t.listLoading=!1})},handleDateChange:function(t){if(t){var e=t[0].getTime(),i=t[1].getTime();this.listQuery.startTime=e,this.listQuery.endTime=i}else this.listQuery.startTime=void 0,this.listQuery.endTime=void 0},handleOnSale:function(t){var e=this;Object(l.e)({id:t.id,status:!t.status}).then(function(i){console.log(i),e.$notify({title:"成功",message:(t.status?"下架":"上架")+"成功",type:"success",duration:2e3}),e.getList()}).catch(function(i){console.log(i),e.$notify({title:"失败",message:i.data?i.data.msg:(t.status?"下架":"上架")+"失败",type:"error",duration:2e3}),e.getList()})},handleCreate:function(){var t=this;this.motorDialogVisible=!0,this.dialogStatus="create",this.$nextTick(function(){t.$refs.motorModal.init()})},handleUpdate:function(t){var e=this;this.motorDialogVisible=!0,this.dialogStatus="update",this.$nextTick(function(){e.$refs.motorModal.init(t)})},handleDelete:function(t){var e=this;Object(l.b)(t.id).then(function(t){e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3})}).catch(function(t){e.$notify({title:"失败",message:t.data?t.data.msg:"删除失败",type:"error",duration:2e3})}).finally(function(){e.getList()})},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},handleFilter:function(){this.listQuery.page=1,this.getList()},handleDownload:function(){var t=this;this.downloadLoading=!0,Promise.all([i.e(2),i.e(73)]).then(i.bind(null,"zWO4")).then(function(e){var i=e.formatJson(["id","name","pic","price","model","status"],t.list,"partsMotor");e.export_json_to_excel({header:["编号","车型名称","车型图片","价格","型号","状态"],data:i,filename:"基础车型"}),t.downloadLoading=!1})}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入车型名称"},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}}),t._v(" "),i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入价格"},model:{value:t.listQuery.price,callback:function(e){t.$set(t.listQuery,"price",e)},expression:"listQuery.price"}}),t._v(" "),i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入型号"},model:{value:t.listQuery.model,callback:function(e){t.$set(t.listQuery,"model",e)},expression:"listQuery.model"}}),t._v(" "),i("el-date-picker",{staticClass:"filter-item-datetimerange",attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.handleDateChange},model:{value:t.dateTime,callback:function(e){t.dateTime=e},expression:"dateTime"}}),t._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("查找")]),t._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreate}},[t._v("添加")]),t._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-download",loading:t.downloadLoading},on:{click:t.handleDownload}},[t._v("导出")])],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{size:"small",data:t.list,"element-loading-text":"正在查询中。。。",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"编号",prop:"id"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"车型名称",prop:"name"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"车型图片",prop:"pic"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("img",{attrs:{src:t.row.pic,width:"40"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"价格",prop:"price"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"型号",prop:"model"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"状态",prop:"status"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\r\n        "+t._s(e.row.status?"上架":"下架")+"\r\n      ")]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作",width:"300","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:e.row.status?"warning":"primary",size:"mini"},on:{click:function(i){t.handleOnSale(e.row)}}},[t._v(t._s(e.row.status?"下架":"上架"))]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){t.handleUpdate(e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{background:"","current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),t.motorDialogVisible?i("basic-motor-modal",{ref:"motorModal",attrs:{dialogStatus:t.dialogStatus},on:{fetchList:function(e){t.getList()}}}):t._e()],1)},staticRenderFns:[]},o=i("VU/8")(n,s,!1,null,null,null);e.default=o.exports}});