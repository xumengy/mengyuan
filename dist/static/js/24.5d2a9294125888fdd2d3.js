webpackJsonp([24],{"+LkW":function(t,a,e){"use strict";a.b=function(t){return Object(i.a)({url:"/admin/admin/integral/rule/list",method:"get",params:t})},a.c=function(t){return Object(i.a)({url:"/admin/admin/integral/rule/type/list",method:"get",params:t})},a.d=function(t){return Object(i.a)({url:"/admin/admin/integral/rule/add",method:"POST",data:t})},a.e=function(t){return Object(i.a)({url:"/admin/admin/integral/rule/update",method:"put",data:t})},a.a=function(t){return Object(i.a)({url:"/admin/admin/integral/rule/delete/"+t,method:"delete"})};var i=e("vLgD")},"9hd3":function(t,a,e){var i=e("L+7P");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e("rjj0")("0d0fc88b",i,!0)},"L+7P":function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.input_inline[data-v-2be16bf2]{\n  display: inline-block;\n  width: 100px;\n  margin: 0 10px;\n}\n.time[data-v-2be16bf2]{\n  width: 400px;\n}\n",""])},L5Ze:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("mvHQ"),r=e.n(i),n=e("+LkW"),l=e("s8Ph"),o={name:"RuleAdd",props:{dialogStatus:String,ruleType:Array},data:function(){return{dialogFormVisible:!1,goodstype:[],dataForm:{type:1,valueId:"",integral:"",conditionValue:"",valueIntegral:"",dataTime:[]},textMap:{update:"编辑",create:"添加"},rules:{valueId:[{required:!0,message:"商品类型不能为空",trigger:"blur"}],type:[{required:!0,message:"积分类型不能为空",trigger:"blur"}],dataTime:[{required:!0,message:"起止时间不能为空",trigger:"change"}]}}},created:function(){this.getlistCategory()},methods:{init:function(t){var a=this;this.dialogFormVisible=!0,this.$nextTick(function(){a.initFormData(t)})},initFormData:function(t){if(t)this.dataForm=this.changeFormData(t),this.$forceUpdate();else{this.dataForm={type:1,valueId:"",integral:"",conditionValue:"",valueIntegral:"",dataTime:[]}}},changeFormData:function(t){var a=JSON.parse(r()(t));return a.dataTime=[],a.startTime&&(a.dataTime[0]=a.startTime),a.endTime&&(a.dataTime[1]=a.endTime),a.valueId||(a.valueId=0),a},getlistCategory:function(){var t=this;Object(l.c)().then(function(a){var e=a.data;t.goodstype=e.data})},changeType:function(t){this.$refs.dataForm.clearValidate()},postAdd:function(t){var a=this;Object(n.d)(t).then(function(t){0===t.data.code&&(a.$parent.getList(),a.closeDailog())}).catch(function(t){a.$message({type:"warning",message:t.data.msg})})},putUpdate:function(t){var a=this;Object(n.e)(t).then(function(t){0===t.data.code&&(a.$parent.getList(),a.closeDailog())}).catch(function(t){a.$message({type:"warning",message:t.data.msg})})},createData:function(t){this.formValidate(t)},updateData:function(t){this.formValidate(t)},formValidate:function(t){var a=this;this.$refs.dataForm.validate(function(e){if(!e)return console.log("error submit!!"),!1;var i={type:a.dataForm.type,valueId:1===a.dataForm.type?0:a.dataForm.valueId,integral:2!==a.dataForm.type?a.dataForm.integral:0,conditionValue:""!==a.dataForm.conditionValue?a.dataForm.conditionValue:0,valueIntegral:""!==a.dataForm.valueIntegral?a.dataForm.valueIntegral:0,startTime:a.dataForm.dataTime[0],endTime:a.dataForm.dataTime[1],id:a.dataForm.id?a.dataForm.id:""};"update"===t&&a.putUpdate(i),"create"===t&&a.postAdd(i)})},closeDailog:function(){this.dialogFormVisible=!1;this.dataForm={type:1,valueId:"",integral:"",conditionValue:"",valueIntegral:"",dataTime:[]},this.$refs.dataForm.resetFields()}}},d={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,width:"1000px"},on:{"update:visible":function(a){t.dialogFormVisible=a}}},[e("el-form",{ref:"dataForm",staticClass:"demo-ruleForm",staticStyle:{"margin-left":"50px"},attrs:{rules:t.rules,model:t.dataForm,"status-icon":"","label-position":"left","label-width":"100px"}},[e("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"积分类型",prop:"type"}},[e("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeType},model:{value:t.dataForm.type,callback:function(a){t.$set(t.dataForm,"type",a)},expression:"dataForm.type"}},t._l(t.ruleType,function(t,a){return e("el-option",{key:a,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),2===t.dataForm.type?[e("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"商品类型",prop:"valueId"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.dataForm.valueId,callback:function(a){t.$set(t.dataForm,"valueId",a)},expression:"dataForm.valueId"}},t._l(t.goodstype,function(t,a){return e("el-option",{key:a,attrs:{label:t.label,value:t.value}})}))],1)]:t._e(),t._v(" "),e("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"起止时间",prop:"dataTime"}},[e("el-date-picker",{staticClass:"time",attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.dataForm.dataTime,callback:function(a){t.$set(t.dataForm,"dataTime",a)},expression:"dataForm.dataTime"}})],1),t._v(" "),2===t.dataForm.type?[e("el-form-item",{attrs:{label:"积分规则",prop:"valueIntegral",required:!0,rules:{required:!0,message:"积分不能为空",trigger:"blur"}}},[e("span",[t._v("购物满")]),e("el-input",{staticClass:"input_inline",model:{value:t.dataForm.conditionValue,callback:function(a){t.$set(t.dataForm,"conditionValue",a)},expression:"dataForm.conditionValue"}}),e("span",[t._v("可获得")]),e("el-input",{staticClass:"input_inline",model:{value:t.dataForm.valueIntegral,callback:function(a){t.$set(t.dataForm,"valueIntegral",a)},expression:"dataForm.valueIntegral"}}),e("span",[t._v("积分")])],1)]:t._e(),t._v(" "),2!==t.dataForm.type?[e("el-form-item",{attrs:{label:"积分规则",prop:"integral",required:!0,rules:[{required:!0,message:"积分不能为空",trigger:"blur"}]}},[e("span",[t._v("可获得")]),e("el-input",{staticClass:"input_inline",model:{value:t.dataForm.integral,callback:function(a){t.$set(t.dataForm,"integral",a)},expression:"dataForm.integral"}}),e("span",[t._v("积分")])],1)]:t._e()],2),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.closeDailog}},[t._v("取消")]),t._v(" "),"create"==t.dialogStatus?e("el-button",{attrs:{type:"primary"},on:{click:function(a){t.createData("create")}}},[t._v("确定")]):e("el-button",{attrs:{type:"primary"},on:{click:function(a){t.updateData("update")}}},[t._v("确定")])],1)],1)},staticRenderFns:[]};var s=e("VU/8")(o,d,!1,function(t){e("9hd3")},"data-v-2be16bf2",null);a.default=s.exports}});