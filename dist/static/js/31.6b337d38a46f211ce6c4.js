webpackJsonp([31],{"/MmQ":function(t,e,i){var o=i("tRww");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i("rjj0")("defb1424",o,!0)},DiAi:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("vLgD");var a=i("6cLz"),r={name:"DealarSetModal",props:{dialogStatus:String},created:function(){},data:function(){return{list:[],motorSelected:"",motorList:[],listLoading:!1,dialogFormVisible:!1,dataForm:{},textMap:{testDriver:"配置预约",customize:"配置定制"},rules:{},dealerInfo:{}}},methods:{init:function(t){var e=this;this.getMotorList(t),this.dealerInfo=t,this.resetForm(),this.dialogFormVisible=!0,this.$nextTick(function(){e.initFormData(t),e.$refs.dataForm.clearValidate()})},getMotorList:function(t){var e,i=this;Object(a.c)().then(function(t){i.motorList=t.data.data.items}),(e={dealerId:t.id},Object(o.a)({url:"/admin/admin/dealerMotor/list",method:"get",params:e})).then(function(t){i.list=t.data.data.items})},initFormData:function(t){t&&(this.dataForm=t)},resetForm:function(){this.dataForm={}},createTestMotorData:function(t){var e,i=this;(e={dealerId:this.dealerInfo.id,list:[{subGoodsId:t.id}]},Object(o.a)({url:"/admin/admin/dealerMotor/createList",method:"post",data:e})).then(function(e){i.$notify({title:"成功",message:"添加成功",type:"success",duration:2e3}),i.list.push(t)}).catch(function(t){i.$notify({title:"失败",message:t.msg?t.msg.data:"添加失败",type:"error",duration:2e3})})},createSetMotor:function(){},createMotor:function(){var t=this;this.motorSelected||this.$notify({title:"失败",message:"请选择车型",type:"error",duration:2e3});for(var e=0;e<this.list.length;e++){if(this.list[e].id===this.motorSelected)return void this.$notify({title:"失败",message:"不能添加重复的车型",type:"error",duration:2e3})}var i=this.motorList.filter(function(e){return e.id===t.motorSelected})[0];this.createTestMotorData(i)},handleDelete:function(t,e){var i,a=this;(i={dealerId:this.dealerInfo.id,subGoodsId:e.id},Object(o.a)({url:"/admin/admin/dealerMotor/delete",method:"post",data:i})).then(function(e){a.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),a.list.splice(t,1)}).catch(function(t){a.$notify({title:"失败",message:t.msg?t.msg.data:"删除失败",type:"error",duration:2e3})})}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"dataForm",staticClass:"select-motor-wrapper",staticStyle:{width:"400px"},attrs:{rules:t.rules,model:t.dataForm,"status-icon":"","label-position":"left","label-width":"100px"}},[i("el-select",{staticClass:"filter-item",attrs:{clearable:"",placeholder:"请选择车型"},model:{value:t.motorSelected,callback:function(e){t.motorSelected=e},expression:"motorSelected"}},t._l(t.motorList,function(t){return i("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})),t._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.createMotor}},[t._v("添加车辆")])],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{size:"small",data:t.list,"element-loading-text":"正在查询中。。。",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"车辆名称",prop:"name"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"车辆图片",prop:"picUrl"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.picUrl?i("img",{attrs:{src:e.row.picUrl,width:"40"}}):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"车辆型号",prop:"model"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"车辆颜色",prop:"color"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作",width:"160px","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("确定")])],1)],1)},staticRenderFns:[]};var n=i("VU/8")(r,l,!1,function(t){i("/MmQ")},"data-v-8e20e498",null);e.default=n.exports},tRww:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.select-motor-wrapper[data-v-8e20e498]{\r\n  margin-bottom: 20px;\n}\r\n",""])}});