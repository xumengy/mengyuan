webpackJsonp([9,31,62],{"/MmQ":function(t,e,a){var i=a("tRww");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("defb1424",i,!0)},DiAi:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("vLgD");var n=a("6cLz"),l={name:"DealarSetModal",props:{dialogStatus:String},created:function(){},data:function(){return{list:[],motorSelected:"",motorList:[],listLoading:!1,dialogFormVisible:!1,dataForm:{},textMap:{testDriver:"配置预约",customize:"配置定制"},rules:{},dealerInfo:{}}},methods:{init:function(t){var e=this;this.getMotorList(t),this.dealerInfo=t,this.resetForm(),this.dialogFormVisible=!0,this.$nextTick(function(){e.initFormData(t),e.$refs.dataForm.clearValidate()})},getMotorList:function(t){var e,a=this;Object(n.c)().then(function(t){a.motorList=t.data.data.items}),(e={dealerId:t.id},Object(i.a)({url:"/admin/admin/dealerMotor/list",method:"get",params:e})).then(function(t){a.list=t.data.data.items})},initFormData:function(t){t&&(this.dataForm=t)},resetForm:function(){this.dataForm={}},createTestMotorData:function(t){var e,a=this;(e={dealerId:this.dealerInfo.id,list:[{subGoodsId:t.id}]},Object(i.a)({url:"/admin/admin/dealerMotor/createList",method:"post",data:e})).then(function(e){a.$notify({title:"成功",message:"添加成功",type:"success",duration:2e3}),a.list.push(t)}).catch(function(t){a.$notify({title:"失败",message:t.msg?t.msg.data:"添加失败",type:"error",duration:2e3})})},createSetMotor:function(){},createMotor:function(){var t=this;this.motorSelected||this.$notify({title:"失败",message:"请选择车型",type:"error",duration:2e3});for(var e=0;e<this.list.length;e++){if(this.list[e].id===this.motorSelected)return void this.$notify({title:"失败",message:"不能添加重复的车型",type:"error",duration:2e3})}var a=this.motorList.filter(function(e){return e.id===t.motorSelected})[0];this.createTestMotorData(a)},handleDelete:function(t,e){var a,n=this;(a={dealerId:this.dealerInfo.id,subGoodsId:e.id},Object(i.a)({url:"/admin/admin/dealerMotor/delete",method:"post",data:a})).then(function(e){n.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),n.list.splice(t,1)}).catch(function(t){n.$notify({title:"失败",message:t.msg?t.msg.data:"删除失败",type:"error",duration:2e3})})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticClass:"select-motor-wrapper",staticStyle:{width:"400px"},attrs:{rules:t.rules,model:t.dataForm,"status-icon":"","label-position":"left","label-width":"100px"}},[a("el-select",{staticClass:"filter-item",attrs:{clearable:"",placeholder:"请选择车型"},model:{value:t.motorSelected,callback:function(e){t.motorSelected=e},expression:"motorSelected"}},t._l(t.motorList,function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.createMotor}},[t._v("添加车辆")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{size:"small",data:t.list,"element-loading-text":"正在查询中。。。",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"车辆名称",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"车辆图片",prop:"picUrl"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.picUrl?a("img",{attrs:{src:e.row.picUrl,width:"40"}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"车辆型号",prop:"model"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"车辆颜色",prop:"color"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"160px","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("确定")])],1)],1)},staticRenderFns:[]};var o=a("VU/8")(l,r,!1,function(t){a("/MmQ")},"data-v-8e20e498",null);e.default=o.exports},PLv9:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.action-btn-width[data-v-0b882eb1]{\r\n  width: 70px;\n}\n.el-form-item[data-v-0b882eb1]{\r\n  margin-bottom: 0;\n}\r\n",""])},mFle:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("aJGK"),n=a("6Kf0"),l=a("07y0"),r={name:"AreaCasc",props:{label:{type:String,default:"区域地址"},provinceId:{type:[Number,String],default:""},cityId:{type:[Number,String],default:""},placeholders:{type:Array,default:function(){return["省","市"]}}},watch:{provinceId:function(t){this.dataForm.provinceId=t},cityId:function(t){var e=this;t?Object(l.b)({id:this.provinceId}).then(function(a){e.cities=a.data.data,e.dataForm.cityId=t}):this.dataForm.cityId=t}},data:function(){return{provinces:[],cities:[],dataForm:{provinceId:"",cityId:""}}},created:function(){},mounted:function(){this.init()},methods:{init:function(){this.getProvinces()},getProvinces:function(){var t=this;Object(l.b)({id:0}).then(function(e){t.provinces=e.data.data})},provinceChange:function(t){var e=this;void 0!==t&&(this.cities=[],this.dataForm.cityId=void 0,this.$emit("provinceChange",this.dataForm),Object(l.b)({id:t}).then(function(t){e.cities=t.data.data}))},cityChange:function(t){void 0!==t&&this.$emit("cityChange",this.dataForm)}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-select",{attrs:{placeholder:t.placeholders[0]||"省"},on:{change:t.provinceChange},model:{value:t.dataForm.provinceId,callback:function(e){t.$set(t.dataForm,"provinceId",e)},expression:"dataForm.provinceId"}},t._l(t.provinces,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-select",{attrs:{placeholder:t.placeholders[1]||"市"},on:{change:t.cityChange},model:{value:t.dataForm.cityId,callback:function(e){t.$set(t.dataForm,"cityId",e)},expression:"dataForm.cityId"}},t._l(t.cities,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)},staticRenderFns:[]},s=a("VU/8")(r,o,!1,null,null,null).exports,c={name:"DealarEditModal",props:{dialogStatus:String},components:{AreaCasc:s},created:function(){},data:function(){return{dialogFormVisible:!1,dataForm:{id:void 0,provinceId:void 0,cityId:void 0},textMap:{update:"编辑",create:"创建"},rules:n.b}},methods:{init:function(t){var e=this;this.resetForm(),this.dialogFormVisible=!0,this.$nextTick(function(){e.initFormData(t),e.$refs.dataForm.clearValidate()})},initFormData:function(t){t&&(this.dataForm=t)},resetForm:function(){this.dataForm={}},requestData:function(t,e){var a=this;this.$refs.dataForm.validate(function(i){i&&e(a.dataForm).then(function(){a.$notify({title:"成功",message:"create"===t?"创建成功":"更新成功",type:"success",duration:2e3})}).catch(function(e){a.$notify({title:"失败",message:e.data?e.data.msg:"create"===t?"创建失败":"更新失败",type:"error",duration:2e3})}).finally(function(){a.$emit("fetchList"),a.dialogFormVisible=!1})})},createData:function(){this.requestData("create",i.a)},updateData:function(){this.requestData("update",i.d)},handleAreaChange:function(t){this.dataForm.provinceId=t.provinceId,this.dataForm.cityId=t.cityId}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:t.rules,model:t.dataForm,"status-icon":"","label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"经销商名称",prop:"name"}},[a("el-input",{model:{value:t.dataForm.name,callback:function(e){t.$set(t.dataForm,"name",e)},expression:"dataForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"主体人",prop:"principal"}},[a("el-input",{model:{value:t.dataForm.principal,callback:function(e){t.$set(t.dataForm,"principal",e)},expression:"dataForm.principal"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"主体人手机",prop:"phone"}},[a("el-input",{model:{value:t.dataForm.phone,callback:function(e){t.$set(t.dataForm,"phone",e)},expression:"dataForm.phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"门店电话",prop:"telephone"}},[a("el-input",{model:{value:t.dataForm.telephone,callback:function(e){t.$set(t.dataForm,"telephone",e)},expression:"dataForm.telephone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"省市"}},[a("area-casc",{attrs:{provinceId:t.dataForm.provinceId,cityId:t.dataForm.cityId},on:{provinceChange:t.handleAreaChange,cityChange:t.handleAreaChange}})],1),t._v(" "),a("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[a("el-input",{model:{value:t.dataForm.address,callback:function(e){t.$set(t.dataForm,"address",e)},expression:"dataForm.address"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),"create"==t.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:t.createData}},[t._v("确定")]):a("el-button",{attrs:{type:"primary"},on:{click:t.updateData}},[t._v("确定")])],1)],1)},staticRenderFns:[]},u=a("VU/8")(c,d,!1,null,null,null);e.default=u.exports},pz1q:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),l=a("aJGK"),r=a("07y0"),o=a("0xDb"),s=a("mFle"),c=a("DiAi"),d=a("Pcuu"),u={name:"Dealer",components:{dealerEditModal:s.default,dealerSetModal:c.default,ActionPermControl:d.a},data:function(){return{cascaderData:[],dateTime:"",headers:{},list:null,total:null,listLoading:!0,listQuery:{page:1,limit:20,sort:"add_time",order:"desc",provinceId:"",cityId:""},props:{value:"id",label:"name",children:"children"},dialogFormVisible:!1,dialogSetFormVisible:!1,dialogStatus:"",dialogSetStatus:"",downloadLoading:!1}},created:function(){this.getList(),this.getProvince()},methods:{getList:function(){var t=this;this.listLoading=!0,Object(l.c)(this.listQuery).then(function(e){var a=e.data.data.items;t.list=a,t.total=e.data.data.total,t.listLoading=!1}).catch(function(e){console.log(e),t.list=[],t.total=0,t.listLoading=!1})},handleDateChange:function(t){if(t){var e=t[0].getTime(),a=t[1].getTime();this.listQuery.beginTime=e,this.listQuery.endTime=a}else this.listQuery.beginTime=void 0,this.listQuery.endTime=void 0},getProvince:function(){var t=this;Object(r.b)({id:0}).then(function(e){t.cascaderData=e.data.data.map(function(t){return{id:t.id,name:t.name,children:[]}})})},getProvinceIndex:function(t){var e=0;return this.cascaderData.map(function(a,i){a.id===t&&(e=i)}),e},handleItemChange:function(t){var e=this;t&&Object(r.b)({id:t[0]}).then(function(a){e.cascaderData[e.getProvinceIndex(t[0])].children=a.data.data.map(function(t){return{id:t.id,name:t.name}})})},handleCityChange:function(t){t.length&&2===t.length?(this.listQuery.provinceId=t[0],this.listQuery.cityId=t[1]):(this.listQuery.provinceId="",this.listQuery.cityId="")},handleFilter:function(){this.listQuery.page=1,this.listQuery=Object(o.a)(this.listQuery),this.getList()},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},handleCreate:function(){var t=this;this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dealerEditModal.init()})},handleUpdate:function(t){var e=this;this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.dealerEditModal.init(JSON.parse(n()(t)))})},handleTestDriver:function(t){var e=this;this.dialogSetStatus="testDriver",this.dialogSetFormVisible=!0,this.$nextTick(function(){e.$refs.dealerSetModal.init(JSON.parse(n()(t)))})},handleDelete:function(t){var e=this;Object(l.b)(t.id).then(function(t){e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3})}).catch(function(t){e.$message({type:"error",message:t.data.msg||"删除失败"})}).finally(function(){e.getList()})},handleDownload:function(){var t=this;this.downloadLoading=!0,Promise.all([a.e(2),a.e(74)]).then(a.bind(null,"zWO4")).then(function(e){var a=e.formatJson(["id","name","principal","phone","telephone","provinceName","cityName","address","addTime"],t.list);e.export_json_to_excel({header:["ID","经销商名称","主体人","主体人手机","门店电话","省份","市","门店地址","添加时间"],data:a,filename:"经销商信息列表"}),t.downloadLoading=!1})}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container calendar-list-container"},[a("div",{staticClass:"filter-container"},[a("el-form",{attrs:{inline:!0,"label-position":"right","label-width":"90px"}},[a("el-form-item",{staticClass:"no-margin-bottom",attrs:{label:"经销商名称"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入经销商名称"},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}})],1),t._v(" "),a("el-form-item",{staticClass:"no-margin-bottom",attrs:{label:"经销商"}},[a("el-cascader",{staticClass:"filter-item",attrs:{clearable:"",options:t.cascaderData,props:t.props},on:{"active-item-change":t.handleItemChange,change:t.handleCityChange}})],1),t._v(" "),a("el-form-item",{staticClass:"no-margin-bottom",attrs:{label:"添加时间"}},[a("el-date-picker",{staticClass:"filter-item-datetimerange",attrs:{clearable:"",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.handleDateChange},model:{value:t.dateTime,callback:function(e){t.dateTime=e},expression:"dateTime"}})],1),t._v(" "),a("el-form-item",{staticClass:"no-margin-bottom",attrs:{label:"门店电话"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入门店电话"},model:{value:t.listQuery.tel,callback:function(e){t.$set(t.listQuery,"tel",e)},expression:"listQuery.tel"}})],1),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("查找")]),t._v(" "),t.$checkPerm("create")?a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreate}},[t._v("添加")]):t._e(),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",loading:t.downloadLoading,icon:"el-icon-download"},on:{click:t.handleDownload}},[t._v("导出")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{size:"small",data:t.list,"element-loading-text":"正在查询中。。。",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"ID",prop:"id"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"经销商名称",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"主体人",prop:"principal"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"主体人手机",prop:"phone"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"门店电话",prop:"telephone"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"省份",prop:"provinceName"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"市",prop:"cityName"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"门店地址",prop:"address"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"添加时间",prop:"addTime"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"360px","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("action-perm-control",{attrs:{hasPerm:t.$checkPerm("update","delete","sub")}},[t.$checkPerm("sub")?a("el-button",{staticClass:"action-btn-width",attrs:{type:"primary",size:"mini"},on:{click:function(a){t.handleTestDriver(e.row)}}},[t._v("配置预约")]):t._e(),t._v(" "),t.$checkPerm("update")?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.handleUpdate(e.row)}}},[t._v("编辑")]):t._e(),t._v(" "),t.$checkPerm("delete")?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.handleDelete(e.row)}}},[t._v("删除")]):t._e()],1)]}}])})],1),t._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),t.dialogFormVisible?a("dealer-edit-modal",{ref:"dealerEditModal",attrs:{dialogStatus:t.dialogStatus},on:{fetchList:function(e){t.getList()}}}):t._e(),t._v(" "),t.dialogSetFormVisible?a("dealer-set-modal",{ref:"dealerSetModal",attrs:{dialogStatus:t.dialogSetStatus},on:{fetchList:function(e){t.getList()}}}):t._e()],1)},staticRenderFns:[]};var p=a("VU/8")(u,m,!1,function(t){a("rzMR")},"data-v-0b882eb1",null);e.default=p.exports},rzMR:function(t,e,a){var i=a("PLv9");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("4e61a9d6",i,!0)},tRww:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.select-motor-wrapper[data-v-8e20e498]{\r\n  margin-bottom: 20px;\n}\r\n",""])}});